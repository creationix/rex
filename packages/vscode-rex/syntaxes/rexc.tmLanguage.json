{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "Rex Compact Encoding",
	"scopeName": "source.rexc",
	"patterns": [{ "include": "#value" }],
	"repository": {
		"value": {
			"patterns": [
				{ "include": "#comment-line" },
				{ "include": "#comment-block" },
				{ "include": "#annotation-line" },
				{ "include": "#control-flow" },
				{ "include": "#call" },
				{ "include": "#array" },
				{ "include": "#object" },
					{ "include": "#set-operator" },
				{ "include": "#delete-operator" },
				{ "include": "#string-container" },
				{ "include": "#index-marker" },
				{ "include": "#opcode" },
				{ "include": "#variable" },
				{ "include": "#reference" },
				{ "include": "#integer" },
				{ "include": "#decimal" },
				{ "include": "#bare-string" },
				{ "include": "#pointer" },
				{ "include": "#annotation-trailing" }
			]
		},

		"comment-line": {
			"match": "//.*$",
			"name": "comment.line.double-slash.rexc"
		},
		"comment-block": {
			"begin": "/\\*",
			"end": "\\*/",
			"name": "comment.block.rexc"
		},
		"annotation-line": {
			"match": "^[ \\t]*[─│┌┐└┘├┤┬┴┼╭╮╰╯║═╔╗╚╝╠╣╦╩╬░▒▓█▄▀].*$",
			"name": "comment.line.annotation.rexc"
		},
		"annotation-trailing": {
			"match": "[─│┌┐└┘├┤┬┴┼╭╮╰╯║═╔╗╚╝╠╣╦╩╬░▒▓█▄▀].*$",
			"name": "comment.line.annotation.rexc"
		},

		"control-flow": {
			"begin": "([-\\w]*)([?!|&]\\()",
			"end": "(\\))",
			"beginCaptures": {
				"1": { "name": "constant.numeric.length.rexc" },
				"2": { "name": "keyword.control.rexc" }
			},
			"endCaptures": {
				"1": { "name": "keyword.control.rexc" }
			},
			"patterns": [{ "include": "#value" }]
		},

		"call": {
			"begin": "([-\\w]*)(\\()",
			"end": "(\\))",
			"beginCaptures": {
				"1": { "name": "constant.numeric.length.rexc" },
				"2": { "name": "punctuation.section.parens.begin.rexc" }
			},
			"endCaptures": {
				"1": { "name": "punctuation.section.parens.end.rexc" }
			},
			"patterns": [{ "include": "#value" }]
		},
		"array": {
			"begin": "([-\\w]*)(\\[)",
			"end": "(\\])",
			"beginCaptures": {
				"1": { "name": "constant.numeric.length.rexc" },
				"2": { "name": "punctuation.section.brackets.begin.rexc" }
			},
			"endCaptures": {
				"1": { "name": "punctuation.section.brackets.end.rexc" }
			},
			"patterns": [{ "include": "#value" }]
		},
		"object": {
			"begin": "([-\\w]*)(\\{)",
			"end": "(\\})",
			"beginCaptures": {
				"1": { "name": "constant.numeric.length.rexc" },
				"2": { "name": "punctuation.section.braces.begin.rexc" }
			},
			"endCaptures": {
				"1": { "name": "punctuation.section.braces.end.rexc" }
			},
			"patterns": [{ "include": "#value" }]
		},

		"set-operator": {
			"match": "([-\\w]*)(=)",
			"captures": {
				"1": { "name": "constant.numeric.length.rexc" },
				"2": { "name": "keyword.operator.assignment.rexc" }
			}
		},
		"delete-operator": {
			"match": "([-\\w]*)(~)",
			"captures": {
				"1": { "name": "constant.numeric.length.rexc" },
				"2": { "name": "keyword.operator.delete.rexc" }
			}
		},
		"string-container": {
			"match": "([-\\w]*)(,)",
			"captures": {
				"1": { "name": "constant.numeric.length.rexc" },
				"2": { "name": "string.quoted.other.delimiter.rexc" }
			}
		},

		"index-marker": {
			"match": "([-\\w]*)(#)",
			"captures": {
				"1": { "name": "keyword.operator.index.prefix.rexc" },
				"2": { "name": "keyword.operator.index.tag.rexc" }
			}
		},

		"opcode": {
			"match": "([-\\w]*)(%)",
			"captures": {
				"1": { "name": "keyword.other.opcode.rexc" },
				"2": { "name": "keyword.other.opcode.rexc" }
			}
		},

		"variable": {
			"match": "([-\\w]*)(\\$)",
			"captures": {
				"1": { "name": "variable.other.rexc" },
				"2": { "name": "variable.other.rexc" }
			}
		},
		"reference": {
			"match": "([-\\w]*)(@)",
			"captures": {
				"1": { "name": "constant.language.rexc" },
				"2": { "name": "constant.language.rexc" }
			}
		},

		"integer": {
			"match": "([-\\w]*)(\\+)",
			"captures": {
				"1": { "name": "constant.numeric.rexc" },
				"2": { "name": "constant.numeric.rexc" }
			}
		},
		"decimal": {
			"match": "([-\\w]*)(\\*)",
			"captures": {
				"1": { "name": "constant.numeric.rexc" },
				"2": { "name": "constant.numeric.rexc" }
			}
		},

		"bare-string": {
			"match": "([-\\w]*)(:)",
			"captures": {
				"1": { "name": "string.unquoted.bare.rexc" },
				"2": { "name": "string.unquoted.bare.rexc" }
			}
		},

		"pointer": {
			"match": "([-\\w]*)(\\^)",
			"captures": {
				"1": { "name": "keyword.operator.pointer.rexc" },
				"2": { "name": "keyword.operator.pointer.rexc" }
			}
		}
	}
}
